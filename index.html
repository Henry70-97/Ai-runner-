<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Runner</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&amp;family=Exo+2:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    :root {
      --neon-green: #00ff88;
      --electric-blue: #00d4ff;
      --deep-navy: #0a0e27;
      --purple-glow: #8b5cf6;
      --glass-bg: rgba(255, 255, 255, 0.05);
      --glass-border: rgba(255, 255, 255, 0.1);
    }
    
    * { box-sizing: border-box; }
    
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Exo 2', sans-serif;
      background: var(--deep-navy);
      color: #ffffff;
      overflow-x: hidden;
    }
    
    .font-orbitron { font-family: 'Orbitron', monospace; }
    .font-exo { font-family: 'Exo 2', sans-serif; }
    
    .video-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0.12;
      z-index: 0;
      filter: hue-rotate(200deg) saturate(1.5) brightness(0.85) contrast(1.3);
      transform: scaleX(-1);
      pointer-events: none;
    }
    
    .glass-panel {
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: 16px;
    }
    
    .glass-card {
      background: linear-gradient(135deg, rgba(0, 255, 136, 0.05) 0%, rgba(0, 212, 255, 0.05) 100%);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border: 1px solid rgba(0, 255, 136, 0.2);
      border-radius: 12px;
      transition: all 0.3s ease;
    }
    
    .glass-card:hover {
      border-color: var(--neon-green);
      box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
      transform: translateY(-2px);
    }
    
    .neon-text {
      color: var(--neon-green);
      text-shadow: 0 0 10px rgba(0, 255, 136, 0.5), 0 0 20px rgba(0, 255, 136, 0.3);
    }
    
    .neon-blue {
      color: var(--electric-blue);
      text-shadow: 0 0 10px rgba(0, 212, 255, 0.5), 0 0 20px rgba(0, 212, 255, 0.3);
    }
    
    .neon-btn {
      background: linear-gradient(135deg, var(--neon-green) 0%, #00cc6a 100%);
      color: var(--deep-navy);
      font-weight: 600;
      padding: 12px 28px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Exo 2', sans-serif;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .neon-btn:hover {
      box-shadow: 0 0 30px rgba(0, 255, 136, 0.6), 0 0 60px rgba(0, 255, 136, 0.3);
      transform: scale(1.02);
    }
    
    .neon-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    .neon-btn-outline {
      background: transparent;
      color: var(--electric-blue);
      border: 2px solid var(--electric-blue);
      padding: 12px 28px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Exo 2', sans-serif;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .neon-btn-outline:hover {
      background: rgba(0, 212, 255, 0.1);
      box-shadow: 0 0 30px rgba(0, 212, 255, 0.4);
    }
    
    .floating-shape {
      position: absolute;
      border-radius: 50%;
      filter: blur(60px);
      animation: float 8s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(180deg); }
    }
    
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 136, 0.3); }
      50% { box-shadow: 0 0 40px rgba(0, 255, 136, 0.6); }
    }
    
    @keyframes slide-in {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .animate-slide-in {
      animation: slide-in 0.5s ease forwards;
    }
    
    .hamburger-menu {
      display: none;
      flex-direction: column;
      gap: 5px;
      cursor: pointer;
      padding: 10px;
      z-index: 1001;
    }
    
    .hamburger-menu span {
      width: 25px;
      height: 3px;
      background: var(--neon-green);
      border-radius: 2px;
      transition: all 0.3s ease;
    }
    
    .hamburger-menu.active span:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }
    
    .hamburger-menu.active span:nth-child(2) {
      opacity: 0;
    }
    
    .hamburger-menu.active span:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -7px);
    }
    
    .mobile-nav {
      position: fixed;
      top: 0;
      left: -100%;
      width: 280px;
      height: 100%;
      background: linear-gradient(180deg, rgba(10, 14, 39, 0.98) 0%, rgba(20, 25, 60, 0.98) 100%);
      backdrop-filter: blur(20px);
      z-index: 1000;
      transition: left 0.3s ease;
      padding: 80px 20px 20px;
      border-right: 1px solid var(--glass-border);
    }
    
    .mobile-nav.active {
      left: 0;
    }
    
    .mobile-nav-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .mobile-nav-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    @media (max-width: 768px) {
      .hamburger-menu { display: flex; }
      .desktop-nav { display: none; }
    }
    
    .progress-bar {
      height: 4px;
      background: rgba(0, 255, 136, 0.2);
      border-radius: 2px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--neon-green), var(--electric-blue));
      border-radius: 2px;
      transition: width 0.3s ease;
    }
    
    .score-display {
      font-size: 48px;
      font-weight: 800;
      background: linear-gradient(135deg, var(--neon-green), var(--electric-blue));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 16px 24px;
      border-radius: 8px;
      z-index: 9999;
      animation: slide-in 0.3s ease;
    }
    
    .toast-success {
      background: linear-gradient(135deg, rgba(0, 255, 136, 0.9), rgba(0, 200, 100, 0.9));
      color: var(--deep-navy);
    }
    
    .toast-error {
      background: linear-gradient(135deg, rgba(255, 100, 100, 0.9), rgba(200, 50, 50, 0.9));
      color: white;
    }
    
    .toast-info {
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.9), rgba(139, 92, 246, 0.9));
      color: white;
    }
    
    .category-icon {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 12px;
      font-size: 24px;
    }
    
    .task-timer {
      font-family: 'Orbitron', monospace;
      font-size: 24px;
      color: var(--electric-blue);
    }
    
    .input-field {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 12px 16px;
      color: white;
      font-family: 'Exo 2', sans-serif;
      transition: all 0.3s ease;
      width: 100%;
    }
    
    .input-field:focus {
      outline: none;
      border-color: var(--neon-green);
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
    }
    
    .input-field::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }
    
    textarea.input-field {
      resize: vertical;
      min-height: 120px;
    }
    
    .stat-value {
      font-family: 'Orbitron', monospace;
      font-size: 28px;
      font-weight: 700;
    }
    
    .page { display: none; }
    .page.active { display: block; }
    
    .nav-link {
      color: rgba(255, 255, 255, 0.7);
      text-decoration: none;
      padding: 8px 16px;
      border-radius: 6px;
      transition: all 0.3s ease;
      cursor: pointer;
      font-weight: 500;
    }
    
    .nav-link:hover, .nav-link.active {
      color: var(--neon-green);
      background: rgba(0, 255, 136, 0.1);
    }
    
    .mobile-nav-link {
      display: block;
      color: rgba(255, 255, 255, 0.8);
      padding: 14px 20px;
      border-radius: 8px;
      transition: all 0.3s ease;
      cursor: pointer;
      font-weight: 500;
      margin-bottom: 8px;
    }
    
    .mobile-nav-link:hover, .mobile-nav-link.active {
      color: var(--neon-green);
      background: rgba(0, 255, 136, 0.1);
    }
    
    .pricing-card {
      position: relative;
      overflow: hidden;
    }
    
    .pricing-card.pro::before {
      content: 'RECOMMENDED';
      position: absolute;
      top: 20px;
      right: -35px;
      background: linear-gradient(135deg, var(--neon-green), var(--electric-blue));
      color: var(--deep-navy);
      padding: 6px 40px;
      font-size: 10px;
      font-weight: 700;
      transform: rotate(45deg);
    }
    
    .withdrawal-locked {
      background: rgba(255, 100, 100, 0.1);
      border: 1px solid rgba(255, 100, 100, 0.3);
    }
    
    .withdrawal-available {
      background: rgba(0, 255, 136, 0.1);
      border: 1px solid rgba(0, 255, 136, 0.3);
    }

    .app-wrapper {
      width: 100%;
      height: 100%;
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
      z-index: 1;
    }
    
    .confirm-dialog {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10000;
      padding: 24px;
      max-width: 400px;
      width: 90%;
    }
    
    .confirm-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 9999;
    }

    select.input-field {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2300ff88' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      padding-right: 40px;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }

    .countdown-timer {
      font-family: 'Orbitron', monospace;
      font-size: 18px;
      font-weight: bold;
      padding: 8px 12px;
      border-radius: 6px;
      background: rgba(0, 255, 136, 0.1);
      border: 1px solid rgba(0, 255, 136, 0.3);
      color: var(--neon-green);
    }

    .payment-message {
      padding: 16px;
      border-radius: 8px;
      background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(0, 212, 255, 0.1));
      border: 1px solid rgba(0, 255, 136, 0.3);
      margin: 16px 0;
    }
  </style>
  <style>body { box-sizing: border-box; }</style>
 </head>
 <body class="h-full">
  <video class="video-bg" autoplay muted loop playsinline><source src="video.mp4" type="video/mp4">
  </video>
  <div class="app-wrapper" id="app"><!-- Floating Shapes -->
   <div class="floating-shape" style="width: 300px; height: 300px; background: rgba(0, 255, 136, 0.15); top: 10%; left: -5%;"></div>
   <div class="floating-shape" style="width: 200px; height: 200px; background: rgba(0, 212, 255, 0.15); top: 60%; right: -3%; animation-delay: -3s;"></div>
   <div class="floating-shape" style="width: 150px; height: 150px; background: rgba(139, 92, 246, 0.15); bottom: 10%; left: 30%; animation-delay: -5s;"></div><!-- Header -->
   <header class="glass-panel fixed top-0 left-0 right-0 z-50" style="border-radius: 0;">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
     <div class="flex items-center gap-4">
      <div class="hamburger-menu" id="hamburgerBtn"><span></span> <span></span> <span></span>
      </div>
      <div class="flex items-center gap-2 cursor-pointer" onclick="navigateTo('landing')">
       <svg class="w-8 h-8" viewbox="0 0 40 40" fill="none"><circle cx="20" cy="20" r="18" stroke="url(#logo-gradient)" stroke-width="2" /> <path d="M12 28L20 12L28 28" stroke="url(#logo-gradient)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /> <circle cx="20" cy="22" r="4" fill="#00ff88" /> <defs>
         <lineargradient id="logo-gradient" x1="0" y1="0" x2="40" y2="40">
          <stop offset="0%" stop-color="#00ff88" />
          <stop offset="100%" stop-color="#00d4ff" />
         </lineargradient>
        </defs>
       </svg><span class="font-orbitron text-xl font-bold neon-text" id="siteTitle">AI Runner</span>
      </div>
     </div>
     <nav class="desktop-nav flex items-center gap-2"><span class="nav-link" onclick="navigateTo('landing')">Home</span> <span class="nav-link" onclick="navigateTo('contact')">Contact</span> <span class="nav-link" onclick="navigateTo('earnings')">Earnings</span> <span class="nav-link" onclick="navigateTo('pricing')">Pricing</span> <span class="nav-link" onclick="navigateTo('faq')">FAQ</span> <span class="nav-link" id="authNavLink" onclick="navigateTo('auth')">Login</span>
     </nav><button class="neon-btn text-sm" onclick="handleStartRunning()" id="headerCTA">Start Running</button>
    </div>
   </header><!-- Mobile Navigation -->
   <div class="mobile-nav-overlay" id="mobileNavOverlay"></div>
   <nav class="mobile-nav" id="mobileNav">
    <div class="mb-8">
     <p class="text-sm text-gray-400 mb-2">Navigation</p>
    </div><span class="mobile-nav-link" onclick="navigateTo('landing'); closeMobileNav();">üè† Home</span> <span class="mobile-nav-link" onclick="navigateTo('dashboard'); closeMobileNav();">üìä Dashboard</span> <span class="mobile-nav-link" onclick="navigateTo('tasks'); closeMobileNav();">üß† Tasks</span> <span class="mobile-nav-link" onclick="navigateTo('earnings'); closeMobileNav();">üí∞ Earnings</span> <span class="mobile-nav-link" onclick="navigateTo('pricing'); closeMobileNav();">üí≥ Pricing</span> <span class="mobile-nav-link" onclick="navigateTo('subscription'); closeMobileNav();">‚≠ê Subscription</span> <span class="mobile-nav-link" onclick="navigateTo('profile'); closeMobileNav();">üë§ Profile</span> <span class="mobile-nav-link" onclick="navigateTo('faq'); closeMobileNav();">‚ùì FAQ</span> <span class="mobile-nav-link" onclick="navigateTo('contact'); closeMobileNav();">üìß Contact</span>
    <div class="mt-8 pt-8 border-t border-gray-700"><span class="mobile-nav-link" id="mobileAuthLink" onclick="navigateTo('auth'); closeMobileNav();">üîê Login</span>
    </div>
   </nav><!-- Toast Container -->
   <div id="toastContainer"></div><!-- Confirm Dialog Container -->
   <div id="confirmContainer"></div><!-- ==================== LANDING PAGE ==================== -->
   <div id="landing-page" class="page active">
    <main class="pt-24 pb-16"><!-- Hero Section -->
     <section class="min-h-screen flex items-center justify-center px-4 relative">
      <div class="max-w-4xl mx-auto text-center">
       <h1 class="font-orbitron text-4xl md:text-6xl font-bold mb-6 leading-tight" id="heroHeadline"><span class="neon-text">Run AI Tasks.</span><br><span class="neon-blue">Earn Real Rewards.</span></h1>
       <p class="text-lg md:text-xl text-gray-300 mb-10 max-w-2xl mx-auto" id="heroSubtext">Complete AI-generated tasks, get scored instantly, and earn rewards from your device.</p>
       <div class="flex flex-col sm:flex-row gap-4 justify-center"><button class="neon-btn text-lg px-10 py-4" onclick="handleStartTasks()">Start Tasks</button> <button class="neon-btn-outline text-lg px-10 py-4" onclick="navigateTo('subscription')">Upgrade to Pro</button>
       </div>
      </div>
     </section><!-- How It Works -->
     <section class="py-20 px-4">
      <div class="max-w-6xl mx-auto">
       <h2 class="font-orbitron text-3xl font-bold text-center mb-16 neon-text">How It Works</h2>
       <div class="grid md:grid-cols-3 gap-8">
        <div class="glass-card p-8 text-center animate-slide-in" style="animation-delay: 0.1s;">
         <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-green-500/20 to-cyan-500/20 flex items-center justify-center"><span class="text-4xl">ü§ñ</span>
         </div>
         <h3 class="font-orbitron text-xl font-bold mb-3 neon-text">1. AI Generates Task</h3>
         <p class="text-gray-400">Our AI creates unique micro-tasks tailored to your skill level</p>
        </div>
        <div class="glass-card p-8 text-center animate-slide-in" style="animation-delay: 0.2s;">
         <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-cyan-500/20 to-purple-500/20 flex items-center justify-center"><span class="text-4xl">‚úçÔ∏è</span>
         </div>
         <h3 class="font-orbitron text-xl font-bold mb-3 neon-blue">2. You Complete It</h3>
         <p class="text-gray-400">Follow instructions and submit your response within the time limit</p>
        </div>
        <div class="glass-card p-8 text-center animate-slide-in" style="animation-delay: 0.3s;">
         <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-purple-500/20 to-green-500/20 flex items-center justify-center"><span class="text-4xl">üí∞</span>
         </div>
         <h3 class="font-orbitron text-xl font-bold mb-3" style="color: #8b5cf6;">3. AI Scores &amp; Rewards</h3>
         <p class="text-gray-400">Get instant AI scoring and earn rewards based on quality</p>
        </div>
       </div>
      </div>
     </section><!-- Task Types -->
     <section class="py-20 px-4">
      <div class="max-w-6xl mx-auto">
       <h2 class="font-orbitron text-3xl font-bold text-center mb-16 neon-blue">Task Types</h2>
       <div class="grid sm:grid-cols-2 lg:grid-cols-5 gap-6">
        <div class="glass-card p-6 text-center">
         <div class="category-icon mx-auto mb-4 bg-gradient-to-br from-green-500/30 to-green-600/30">
          üí¨
         </div>
         <h4 class="font-semibold mb-2">AI Chat Missions</h4>
         <p class="text-sm text-gray-400">Engage in AI conversations</p>
        </div>
        <div class="glass-card p-6 text-center">
         <div class="category-icon mx-auto mb-4 bg-gradient-to-br from-cyan-500/30 to-cyan-600/30">
          üìù
         </div>
         <h4 class="font-semibold mb-2">Rewrite &amp; Improve</h4>
         <p class="text-sm text-gray-400">Enhance existing content</p>
        </div>
        <div class="glass-card p-6 text-center">
         <div class="category-icon mx-auto mb-4 bg-gradient-to-br from-purple-500/30 to-purple-600/30">
          üåç
         </div>
         <h4 class="font-semibold mb-2">Translation</h4>
         <p class="text-sm text-gray-400">EN ‚Üî SW / Sheng</p>
        </div>
        <div class="glass-card p-6 text-center">
         <div class="category-icon mx-auto mb-4 bg-gradient-to-br from-pink-500/30 to-pink-600/30">
          üí°
         </div>
         <h4 class="font-semibold mb-2">Prompt Challenges</h4>
         <p class="text-sm text-gray-400">Create effective prompts</p>
        </div>
        <div class="glass-card p-6 text-center">
         <div class="category-icon mx-auto mb-4 bg-gradient-to-br from-yellow-500/30 to-yellow-600/30">
          üé®
         </div>
         <h4 class="font-semibold mb-2">Micro Creativity</h4>
         <p class="text-sm text-gray-400">Quick creative tasks</p>
        </div>
       </div>
      </div>
     </section><!-- Earnings Preview -->
     <section class="py-20 px-4">
      <div class="max-w-4xl mx-auto">
       <div class="glass-panel p-10 text-center">
        <h2 class="font-orbitron text-3xl font-bold mb-8 neon-text">Earnings Preview</h2>
        <div class="grid md:grid-cols-3 gap-8">
         <div>
          <p class="text-4xl font-bold neon-text mb-2">$0.05 ‚Äì $1</p>
          <p class="text-gray-400">Per task completed</p>
         </div>
         <div>
          <p class="text-4xl font-bold neon-blue mb-2">Instant</p>
          <p class="text-gray-400">AI scoring</p>
         </div>
         <div>
          <p class="text-4xl font-bold mb-2" style="color: #8b5cf6;">Zero</p>
          <p class="text-gray-400">Experience required</p>
         </div>
        </div>
       </div>
      </div>
     </section>
    </main>
   </div><!-- ==================== PRICING PAGE ==================== -->
   <div id="pricing-page" class="page">
    <main class="pt-28 pb-16 px-4">
     <div class="max-w-5xl mx-auto">
      <h1 class="font-orbitron text-4xl font-bold text-center mb-4 neon-text">Choose Your Plan</h1>
      <p class="text-center text-gray-400 mb-16">Start earning today with the plan that fits you</p>
      <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto"><!-- Free Plan -->
       <div class="glass-card pricing-card p-8">
        <div class="text-center mb-8">
         <h3 class="font-orbitron text-2xl font-bold mb-2">Free Runner</h3>
         <p class="text-4xl font-bold neon-text">$0</p>
         <p class="text-gray-400">Forever free</p>
        </div>
        <ul class="space-y-4 mb-8">
         <li class="flex items-center gap-3"><span class="text-green-400">‚úì</span> <span>$0.05 ‚Äì $1 per task</span></li>
         <li class="flex items-center gap-3"><span class="text-green-400">‚úì</span> <span>Withdraw only on 27th</span></li>
         <li class="flex items-center gap-3"><span class="text-yellow-400">!</span> <span>Minimum withdrawal: $20</span></li>
         <li class="flex items-center gap-3"><span class="text-yellow-400">!</span> <span>Limited daily tasks</span></li>
        </ul><button class="w-full neon-btn-outline" onclick="handleContinueFree()">Continue Free</button>
       </div><!-- Pro Plan -->
       <div class="glass-card pricing-card pro p-8" style="border-color: var(--neon-green);">
        <div class="text-center mb-8">
         <h3 class="font-orbitron text-2xl font-bold mb-2 neon-text">Pro Runner</h3>
         <p class="text-4xl font-bold neon-blue">$3.00</p>
         <p class="text-gray-400">One-time payment</p>
        </div>
        <ul class="space-y-4 mb-8">
         <li class="flex items-center gap-3"><span class="text-green-400">‚úì</span> <span>Higher-paying tasks</span></li>
         <li class="flex items-center gap-3"><span class="text-green-400">‚úì</span> <span>Withdraw 3√ó per month</span></li>
         <li class="flex items-center gap-3"><span class="text-green-400">‚úì</span> <span>Minimum withdrawal: $5</span></li>
         <li class="flex items-center gap-3"><span class="text-green-400">‚úì</span> <span>Priority task access</span></li>
         <li class="flex items-center gap-3"><span class="text-green-400">‚úì</span> <span>Unlimited daily tasks</span></li>
        </ul><button class="w-full neon-btn" onclick="navigateTo('subscription')">Upgrade to Pro</button>
       </div>
      </div>
     </div>
    </main>
   </div><!-- ==================== AUTH PAGE ==================== -->
   <div id="auth-page" class="page">
    <main class="pt-28 pb-16 px-4 min-h-screen flex items-center justify-center">
     <div class="glass-panel p-8 w-full max-w-md">
      <div class="text-center mb-8">
       <h1 class="font-orbitron text-3xl font-bold neon-text mb-2" id="authTitle">Welcome Back</h1>
       <p class="text-gray-400" id="authSubtitle">Sign in to continue earning</p>
      </div>
      <div class="flex gap-2 mb-8"><button class="flex-1 py-3 rounded-lg font-semibold transition-all auth-tab active" id="loginTab" onclick="switchAuthTab('login')">Login</button> <button class="flex-1 py-3 rounded-lg font-semibold transition-all auth-tab" id="registerTab" onclick="switchAuthTab('register')">Register</button>
      </div>
      <form id="authForm" onsubmit="handleAuth(event)">
       <div class="space-y-4">
        <div id="usernameField"><label class="block text-sm text-gray-400 mb-2">Username</label> <input type="text" id="authUsername" class="input-field" placeholder="Enter username" required>
        </div>
        <div id="emailField" style="display: none;"><label class="block text-sm text-gray-400 mb-2">Email</label> <input type="email" id="authEmail" class="input-field" placeholder="Enter email">
        </div>
        <div><label class="block text-sm text-gray-400 mb-2">Password</label> <input type="password" id="authPassword" class="input-field" placeholder="Enter password" required>
        </div>
       </div><button type="submit" class="w-full neon-btn mt-6" id="authSubmitBtn">Sign In</button>
      </form>
      <div class="mt-6 text-center"><button class="text-gray-400 hover:text-white transition-colors" onclick="handleGuestMode()">Continue as Guest ‚Üí</button>
      </div>
     </div>
    </main>
   </div><!-- ==================== DASHBOARD PAGE ==================== -->
   <div id="dashboard-page" class="page">
    <main class="pt-28 pb-16 px-4">
     <div class="max-w-6xl mx-auto">
      <div class="flex items-center justify-between mb-8">
       <div>
        <h1 class="font-orbitron text-3xl font-bold neon-text">Dashboard</h1>
        <p class="text-gray-400">Welcome back, <span id="dashboardUsername">Runner</span></p>
       </div>
       <div class="glass-card px-4 py-2"><span class="text-sm text-gray-400">Status: </span> <span class="font-semibold" id="membershipBadge">Free</span>
       </div>
      </div><!-- Stats Cards -->
      <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
       <div class="glass-card p-6">
        <div class="flex items-center justify-between mb-4"><span class="text-gray-400">Current Balance</span> <span class="text-2xl">üí∞</span>
        </div>
        <p class="stat-value neon-text" id="balanceDisplay">$0.00</p>
       </div>
       <div class="glass-card p-6">
        <div class="flex items-center justify-between mb-4"><span class="text-gray-400">Tasks Completed</span> <span class="text-2xl">‚úÖ</span>
        </div>
        <p class="stat-value neon-blue" id="tasksCompletedDisplay">0</p>
       </div>
       <div class="glass-card p-6">
        <div class="flex items-center justify-between mb-4"><span class="text-gray-400">Membership</span> <span class="text-2xl">‚≠ê</span>
        </div>
        <p class="stat-value" style="color: #8b5cf6;" id="membershipDisplay">Free</p>
       </div>
       <div class="glass-card p-6">
        <div class="flex items-center justify-between mb-4"><span class="text-gray-400">Next Withdrawal</span> <span class="text-2xl">üìÖ</span>
        </div>
        <p class="stat-value text-white text-lg" id="withdrawalDateDisplay">27th</p>
       </div>
      </div><!-- Withdrawal Status -->
      <div class="glass-card p-6 mb-8" id="withdrawalStatusCard">
       <div class="flex items-center justify-between">
        <div>
         <h3 class="font-semibold mb-1">Withdrawal Status</h3>
         <p class="text-sm text-gray-400" id="withdrawalStatusText">Free users can withdraw on the 27th</p>
        </div>
        <div class="flex items-center gap-4">
         <div class="countdown-timer" id="withdrawalCountdown">
          Calculating...
         </div><button class="neon-btn" id="withdrawBtn" onclick="handleWithdraw()">Withdraw</button>
        </div>
       </div>
      </div><!-- Quick Actions -->
      <div class="grid sm:grid-cols-3 gap-6"><button class="glass-card p-6 text-left hover:border-green-400 transition-all" onclick="navigateTo('tasks')"> <span class="text-3xl mb-4 block">üß†</span> <h3 class="font-semibold mb-1">Start New Task</h3><p class="text-sm text-gray-400">Begin earning now</p></button> <button class="glass-card p-6 text-left hover:border-cyan-400 transition-all" onclick="navigateTo('earnings')"> <span class="text-3xl mb-4 block">üí∞</span> <h3 class="font-semibold mb-1">View Earnings</h3><p class="text-sm text-gray-400">Track your rewards</p></button> <button class="glass-card p-6 text-left hover:border-purple-400 transition-all" onclick="navigateTo('subscription')"> <span class="text-3xl mb-4 block">‚¨ÜÔ∏è</span> <h3 class="font-semibold mb-1">Upgrade Membership</h3><p class="text-sm text-gray-400">Unlock more features</p></button>
      </div>
     </div>
    </main>
   </div><!-- ==================== TASKS PAGE ==================== -->
   <div id="tasks-page" class="page">
    <main class="pt-28 pb-16 px-4">
     <div class="max-w-4xl mx-auto"><!-- Category Selection -->
      <div id="taskCategoryView">
       <h1 class="font-orbitron text-3xl font-bold text-center mb-4 neon-text">Select Task Category</h1>
       <p class="text-center text-gray-400 mb-8">Choose a category to start earning</p>
       <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6" id="categoryGrid"><!-- Categories will be rendered here -->
       </div>
       <div class="mt-8 text-center">
        <p class="text-sm text-gray-400">Daily tasks remaining: <span id="dailyTasksRemaining">10</span></p>
       </div>
      </div><!-- Task List View -->
      <div id="taskListView" style="display: none;">
       <div class="flex items-center gap-4 mb-8"><button class="neon-btn-outline px-4 py-2" onclick="showCategories()">‚Üê Back</button>
        <h2 class="font-orbitron text-2xl font-bold neon-text" id="selectedCategoryTitle">Category Tasks</h2>
       </div>
       <div class="grid gap-4" id="taskList"><!-- Tasks will be rendered here -->
       </div>
      </div><!-- Active Task View -->
      <div id="activeTaskView" style="display: none;">
       <div class="glass-panel p-8">
        <div class="flex items-center justify-between mb-6">
         <div class="flex items-center gap-4"><button class="text-gray-400 hover:text-white" onclick="showTaskList()">‚Üê Back</button> <span class="px-3 py-1 rounded-full text-sm bg-gradient-to-r from-green-500/20 to-cyan-500/20 border border-green-500/30" id="taskCategoryBadge">Category</span>
         </div>
         <div class="task-timer" id="taskTimer">
          02:00
         </div>
        </div>
        <h2 class="font-orbitron text-2xl font-bold mb-4" id="taskTitle">Task Title</h2>
        <div class="glass-card p-4 mb-6">
         <p class="text-gray-300" id="taskInstructions">Instructions will appear here...</p>
        </div>
        <div class="flex items-center gap-6 mb-6 text-sm text-gray-400"><span>üìù Word limit: <span id="taskWordLimit">100</span></span> <span>üí∞ Payout: <span class="neon-text" id="taskPayout">$0.50</span></span>
        </div>
        <div class="mb-6"><label class="block text-sm text-gray-400 mb-2">Your Response</label> <textarea id="taskResponse" class="input-field" placeholder="Type your response here..." oninput="updateWordCount()"></textarea>
         <div class="flex justify-between mt-2 text-sm"><span class="text-gray-400">Words: <span id="wordCount">0</span> / <span id="maxWords">100</span></span> <span id="copyPasteWarning" class="text-red-400" style="display: none;">‚ö†Ô∏è Copy-paste detected</span>
         </div>
        </div><button class="w-full neon-btn" id="submitTaskBtn" onclick="submitTask()">Submit Response</button>
       </div>
      </div><!-- Task Result View -->
      <div id="taskResultView" style="display: none;">
       <div class="glass-panel p-8 text-center">
        <h2 class="font-orbitron text-2xl font-bold mb-6">Task Complete!</h2>
        <div class="mb-6" id="resultStatusContainer">
         <p class="text-gray-400 mb-2">Your Score</p>
         <p class="score-display" id="resultScore">85</p>
        </div>
        <div class="glass-card p-4 mb-6" id="resultRewardContainer">
         <p class="text-gray-400 mb-2">Reward Earned</p>
         <p class="text-3xl font-bold neon-text" id="resultReward">$0.60</p>
        </div>
        <div class="glass-card p-4 mb-8">
         <p class="text-gray-400 mb-2">AI Feedback</p>
         <p class="text-gray-300" id="resultFeedback">Great job! Your response was clear and well-structured.</p>
        </div>
        <div class="flex gap-4 justify-center"><button class="neon-btn" onclick="showCategories()">More Tasks</button> <button class="neon-btn-outline" onclick="navigateTo('dashboard')">Dashboard</button>
        </div>
       </div>
      </div>
     </div>
    </main>
   </div><!-- ==================== EARNINGS PAGE ==================== -->
   <div id="earnings-page" class="page">
    <main class="pt-28 pb-16 px-4">
     <div class="max-w-4xl mx-auto">
      <h1 class="font-orbitron text-3xl font-bold text-center mb-4 neon-text">Your Earnings</h1>
      <p class="text-center text-gray-400 mb-8">Track your rewards and withdrawals</p><!-- Summary Cards -->
      <div class="grid sm:grid-cols-3 gap-6 mb-8">
       <div class="glass-card p-6 text-center">
        <p class="text-gray-400 mb-2">Total Earned</p>
        <p class="stat-value neon-text" id="totalEarned">$0.00</p>
       </div>
       <div class="glass-card p-6 text-center">
        <p class="text-gray-400 mb-2">Available Balance</p>
        <p class="stat-value neon-blue" id="availableBalance">$0.00</p>
       </div>
       <div class="glass-card p-6 text-center">
        <p class="text-gray-400 mb-2">Withdrawn</p>
        <p class="stat-value" style="color: #8b5cf6;" id="totalWithdrawn">$0.00</p>
       </div>
      </div><!-- Withdrawal Info -->
      <div class="glass-card p-6 mb-8" id="earningsWithdrawalCard">
       <h3 class="font-semibold mb-4">Withdrawal Rules &amp; Countdown</h3>
       <div id="withdrawalRulesContent"><!-- Will be populated based on membership -->
       </div>
      </div><!-- Recent Earnings -->
      <div class="glass-card p-6">
       <h3 class="font-semibold mb-4">Recent Earnings</h3>
       <div id="recentEarningsList" class="space-y-3">
        <p class="text-gray-400 text-center py-4">Complete tasks to see earnings here</p>
       </div>
      </div>
     </div>
    </main>
   </div><!-- ==================== SUBSCRIPTION PAGE ==================== -->
   <div id="subscription-page" class="page">
    <main class="pt-28 pb-16 px-4">
     <div class="max-w-2xl mx-auto">
      <h1 class="font-orbitron text-3xl font-bold text-center mb-4 neon-text">Upgrade to Pro</h1>
      <p class="text-center text-gray-400 mb-8">Unlock premium features and earn more</p>
      <div class="glass-panel p-8">
       <div class="text-center mb-8">
        <p class="text-5xl font-bold neon-blue mb-2">$3.00</p>
        <p class="text-gray-400">One-time payment</p>
       </div>
       <div class="space-y-4 mb-8">
        <div class="flex items-center gap-3"><span class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center text-green-400">‚úì</span> <span>Access to higher-paying tasks ($1.50+ per task)</span>
        </div>
        <div class="flex items-center gap-3"><span class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center text-green-400">‚úì</span> <span>Withdraw up to 3 times per month</span>
        </div>
        <div class="flex items-center gap-3"><span class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center text-green-400">‚úì</span> <span>Lower minimum withdrawal ($5 instead of $20)</span>
        </div>
        <div class="flex items-center gap-3"><span class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center text-green-400">‚úì</span> <span>Priority access to new tasks</span>
        </div>
        <div class="flex items-center gap-3"><span class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center text-green-400">‚úì</span> <span>Unlimited daily tasks</span>
        </div>
       </div>
       <div id="subscriptionAction"><button class="w-full neon-btn text-lg py-4" onclick="handleSubscribe()">Proceed to Payment - $3.00</button>
        <p class="text-center text-sm text-gray-400 mt-4">Secure payment ‚Ä¢ Instant activation</p>
       </div>
       <div id="paymentReceivedMessage" class="payment-message text-center" style="display: none;">
        <p class="text-lg font-bold neon-text mb-2">üíö Payment Received!</p>
        <p class="text-gray-300">Thank you for upgrading to Pro Runner. Your account has been activated immediately. You now have access to all premium features!</p>
       </div>
       <div id="alreadyProMessage" style="display: none;">
        <div class="text-center py-4"><span class="text-4xl mb-4 block">üéâ</span>
         <p class="text-xl font-bold neon-text mb-2">You're already a Pro Runner!</p>
         <p class="text-gray-400">Enjoy all premium benefits</p>
        </div>
       </div>
      </div>
     </div>
    </main>
   </div><!-- ==================== PROFILE PAGE ==================== -->
   <div id="profile-page" class="page">
    <main class="pt-28 pb-16 px-4">
     <div class="max-w-2xl mx-auto">
      <h1 class="font-orbitron text-3xl font-bold text-center mb-8 neon-text">Profile &amp; Settings</h1>
      <div class="glass-panel p-8 mb-6">
       <div class="flex items-center gap-6 mb-8">
        <div class="w-20 h-20 rounded-full bg-gradient-to-br from-green-500 to-cyan-500 flex items-center justify-center text-3xl">
         üë§
        </div>
        <div>
         <h2 class="font-orbitron text-xl font-bold" id="profileUsername">Username</h2>
         <p class="text-gray-400" id="profileMembership">Free Runner</p>
        </div>
       </div>
       <div class="grid sm:grid-cols-2 gap-6 mb-8">
        <div class="glass-card p-4">
         <p class="text-sm text-gray-400 mb-1">Total Earnings</p>
         <p class="text-2xl font-bold neon-text" id="profileTotalEarnings">$0.00</p>
        </div>
        <div class="glass-card p-4">
         <p class="text-sm text-gray-400 mb-1">Tasks Completed</p>
         <p class="text-2xl font-bold neon-blue" id="profileTasksCompleted">0</p>
        </div>
       </div>
       <div class="space-y-4">
        <div><label class="block text-sm text-gray-400 mb-2">Language</label> <select class="input-field" id="languageSelect" onchange="changeLanguage()"> <option value="en">English</option> <option value="sw">Swahili</option> </select>
        </div>
       </div>
      </div>
      <div class="space-y-4"><button class="w-full glass-card p-4 text-left hover:border-red-400 transition-all flex items-center justify-between" onclick="handleLogout()"> <span>üö™ Logout</span> <span class="text-gray-400">‚Üí</span> </button> <button class="w-full glass-card p-4 text-left hover:border-red-400 transition-all flex items-center justify-between text-red-400" onclick="handleResetSession()"> <span>üóëÔ∏è Reset All Data</span> <span>‚Üí</span> </button>
      </div>
     </div>
    </main>
   </div><!-- ==================== FAQ PAGE ==================== -->
   <div id="faq-page" class="page">
    <main class="pt-28 pb-16 px-4">
     <div class="max-w-3xl mx-auto">
      <h1 class="font-orbitron text-3xl font-bold text-center mb-4 neon-text">Frequently Asked Questions</h1>
      <p class="text-center text-gray-400 mb-12">Everything you need to know about AI Runner</p>
      <div class="space-y-4" id="faqContainer"><!-- FAQ items will be rendered here -->
      </div>
     </div>
    </main>
   </div><!-- ==================== CONTACT PAGE ==================== -->
   <div id="contact-page" class="page">
    <main class="pt-28 pb-16 px-4">
     <div class="max-w-2xl mx-auto">
      <h1 class="font-orbitron text-3xl font-bold text-center mb-4 neon-text">Contact Us</h1>
      <p class="text-center text-gray-400 mb-8">We'd love to hear from you</p>
      <div class="glass-panel p-8">
       <form onsubmit="handleContactSubmit(event)">
        <div class="space-y-4">
         <div><label class="block text-sm text-gray-400 mb-2">Name</label> <input type="text" id="contactName" class="input-field" placeholder="Your name" required>
         </div>
         <div><label class="block text-sm text-gray-400 mb-2">Email</label> <input type="email" id="contactEmail" class="input-field" placeholder="your@email.com" required>
         </div>
         <div><label class="block text-sm text-gray-400 mb-2">Subject</label> <select id="contactSubject" class="input-field"> <option>General Inquiry</option> <option>Registration Support</option> <option>Withdrawal Request</option> <option>Upgrade Support</option> <option>Technical Support</option> <option>Payment Issue</option> <option>Feature Request</option> </select>
         </div>
         <div><label class="block text-sm text-gray-400 mb-2">Message</label> <textarea id="contactMessage" class="input-field" rows="5" placeholder="How can we help?" required></textarea>
         </div>
        </div><button type="submit" class="w-full neon-btn mt-6" id="contactSubmitBtn">Send Message</button>
       </form>
      </div>
      <div class="grid sm:grid-cols-2 gap-6 mt-8">
       <div class="glass-card p-6 text-center"><span class="text-3xl mb-4 block">üìß</span>
        <p class="font-semibold mb-1">Email</p>
        <p class="text-gray-400">support@airunner.app</p>
       </div>
       <div class="glass-card p-6 text-center"><span class="text-3xl mb-4 block">üí¨</span>
        <p class="font-semibold mb-1">Live Chat</p>
        <p class="text-gray-400">Available 24/7</p>
       </div>
      </div>
     </div>
    </main>
   </div><!-- Footer -->
   <footer class="glass-panel py-8 px-4 mt-auto" style="border-radius: 0;">
    <div class="max-w-6xl mx-auto text-center">
     <div class="flex items-center justify-center gap-2 mb-4">
      <svg class="w-6 h-6" viewbox="0 0 40 40" fill="none"><circle cx="20" cy="20" r="18" stroke="#00ff88" stroke-width="2" /> <path d="M12 28L20 12L28 28" stroke="#00ff88" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /> <circle cx="20" cy="22" r="4" fill="#00ff88" />
      </svg><span class="font-orbitron font-bold neon-text">AI Runner</span>
     </div>
     <p class="text-gray-400 text-sm">¬© 2024 AI Runner. All rights reserved.</p>
    </div>
   </footer>
  </div>
  <script>
    // ==================== CONFIGURATION ====================
    const defaultConfig = {
      site_title: 'AI Runner',
      hero_headline: 'Run AI Tasks. Earn Real Rewards.',
      hero_subtext: 'Complete AI-generated tasks, get scored instantly, and earn rewards from your device.',
      primary_color: '#00ff88',
      secondary_color: '#00d4ff',
      background_color: '#0a0e27',
      text_color: '#ffffff',
      accent_color: '#8b5cf6'
    };

    let config = { ...defaultConfig };

    // ==================== STATE MANAGEMENT ====================
    let appState = {
      isLoggedIn: false,
      isPro: false,
      username: 'Guest',
      balance: 0,
      totalEarned: 0,
      totalWithdrawn: 0,
      tasksCompleted: 0,
      dailyTasksRemaining: 10,
      withdrawalsThisMonth: 0,
      lastWithdrawalDate: null,
      completedTaskIds: [],
      currentTask: null,
      timerInterval: null,
      withdrawalCountdownInterval: null,
      timeRemaining: 120
    };

    let completedTasks = [];

    // ==================== TRANSLATION DATABASE ====================
    const swahiliDictionary = {
      // Correct translations
      'Habari': true, 'Good morning': true,
      'Asante sana': true, 'Thank you very much': true,
      'Geuka kushoto': true, 'Turn left': true,
      'Kuku iliyochomwa': true, 'Grilled chicken': true,
      'Karibu sana nyumbani kwetu': true, 'Welcome to our home': true,
      'Wapi zahanati karibu': true, 'Where is hospital nearby': true,
      'Bei gani': true, 'How much': true,
      'Nataka kupanga miadi': true, 'I want to schedule appointment': true,
      'Tabia ya hewa': true, 'Weather': true,
      'Jina langu': true, 'My name': true,
      'Saa za kazi': true, 'Working hours': true,
      'Nataka': true, 'I want': true,
      'Simu yangu': true, 'My phone': true,
      'Watoto': true, 'Children': true,
      'Shukrani': true, 'Thank you': true
    };

    const shengDictionary = {
      'Maze': true,
      'Tight': true,
      'Poa': true,
      'Vibes': true,
      'Slay': true,
      'Lit': true,
      'Vibe check': true,
      'Amazing': true,
      'Fun': true
    };

    // ==================== TASK DATABASE ====================
    const taskCategories = [
      { id: 'chat', name: 'AI Chat Missions', icon: 'üí¨', color: 'from-green-500/30 to-green-600/30' },
      { id: 'rewrite', name: 'Rewrite & Improve', icon: 'üìù', color: 'from-cyan-500/30 to-cyan-600/30' },
      { id: 'translation', name: 'Translation', icon: 'üåç', color: 'from-purple-500/30 to-purple-600/30' },
      { id: 'prompt', name: 'Prompt Challenges', icon: 'üí°', color: 'from-pink-500/30 to-pink-600/30' },
      { id: 'creative', name: 'Micro Creativity', icon: 'üé®', color: 'from-yellow-500/30 to-yellow-600/30' }
    ];

    const taskDatabase = {
      chat: [
        { id: 'chat1', title: 'Friendly Greeting', instructions: 'Write a warm, professional greeting message that an AI assistant would use to start a conversation with a new user. Make it welcoming and helpful.', wordLimit: 50, timeLimit: 120, payout: 0.20 },
        { id: 'chat2', title: 'Product Recommendation', instructions: 'Write a helpful response recommending a laptop for a college student with a $800 budget. Include key features to look for.', wordLimit: 100, timeLimit: 120, payout: 0.40 },
        { id: 'chat3', title: 'Troubleshooting Guide', instructions: 'Write a step-by-step response helping someone whose phone won\'t charge. Be clear and methodical.', wordLimit: 80, timeLimit: 120, payout: 0.35 },
        { id: 'chat4', title: 'Appointment Scheduling', instructions: 'Write a polite response helping schedule a dentist appointment for next Tuesday afternoon.', wordLimit: 60, timeLimit: 120, payout: 0.25 },
        { id: 'chat5', title: 'Recipe Suggestion', instructions: 'Suggest a quick dinner recipe using chicken, rice, and vegetables. Include basic instructions.', wordLimit: 100, timeLimit: 120, payout: 0.40 },
        { id: 'chat6', title: 'Travel Advice', instructions: 'Provide helpful tips for someone visiting Tokyo for the first time. Focus on practical advice.', wordLimit: 100, timeLimit: 120, payout: 0.45 },
        { id: 'chat7', title: 'Fitness Motivation', instructions: 'Write an encouraging response to someone who wants to start exercising but lacks motivation.', wordLimit: 80, timeLimit: 120, payout: 0.30 },
        { id: 'chat8', title: 'Study Tips', instructions: 'Provide effective study tips for a student preparing for final exams.', wordLimit: 80, timeLimit: 120, payout: 0.35 },
        { id: 'chat9', title: 'Gift Ideas', instructions: 'Suggest thoughtful birthday gift ideas for a 30-year-old who loves reading and cooking.', wordLimit: 70, timeLimit: 120, payout: 0.30 },
        { id: 'chat10', title: 'Career Advice', instructions: 'Give advice to someone considering switching from marketing to tech.', wordLimit: 100, timeLimit: 120, payout: 0.50 }
      ],
      rewrite: [
        { id: 'rewrite1', title: 'Email Improvement', instructions: 'Rewrite this casual email to be more professional: "Hey boss, gonna be late today cuz my car broke down. Should be there by 10."', wordLimit: 60, timeLimit: 120, payout: 0.30 },
        { id: 'rewrite2', title: 'Product Description', instructions: 'Improve this product description: "Nice shoes. Very comfortable. Good for running."', wordLimit: 80, timeLimit: 120, payout: 0.35 },
        { id: 'rewrite3', title: 'Social Media Post', instructions: 'Make this post more engaging: "We sell coffee. It tastes good. Buy some."', wordLimit: 50, timeLimit: 120, payout: 0.25 },
        { id: 'rewrite4', title: 'Resume Bullet', instructions: 'Improve this resume point: "Did sales stuff and helped customers."', wordLimit: 40, timeLimit: 120, payout: 0.20 },
        { id: 'rewrite5', title: 'Blog Intro', instructions: 'Rewrite this intro to be more captivating: "This blog is about cooking. I will share recipes."', wordLimit: 60, timeLimit: 120, payout: 0.30 },
        { id: 'rewrite6', title: 'Apology Message', instructions: 'Make this apology more sincere: "Sorry for the problem. Won\'t happen again."', wordLimit: 50, timeLimit: 120, payout: 0.25 },
        { id: 'rewrite7', title: 'Event Invitation', instructions: 'Make this invitation more exciting: "Party on Saturday at my house. Starts at 7."', wordLimit: 60, timeLimit: 120, payout: 0.30 },
        { id: 'rewrite8', title: 'Thank You Note', instructions: 'Improve this thank you: "Thanks for the gift. I like it."', wordLimit: 50, timeLimit: 120, payout: 0.20 },
        { id: 'rewrite9', title: 'Job Posting', instructions: 'Make this job post more appealing: "Need someone to do data entry. Full time."', wordLimit: 80, timeLimit: 120, payout: 0.40 },
        { id: 'rewrite10', title: 'Review Response', instructions: 'Improve this business response: "Thanks for review. We try hard."', wordLimit: 60, timeLimit: 120, payout: 0.30 }
      ],
      translation: [
        { id: 'trans1', title: 'Greeting (EN‚ÜíSW)', instructions: 'Translate to Swahili: "Good morning"', wordLimit: 10, timeLimit: 120, payout: 0.40, correctAnswers: ['Habari'] },
        { id: 'trans2', title: 'Thank You (EN‚ÜíSW)', instructions: 'Translate to Swahili: "Thank you very much"', wordLimit: 10, timeLimit: 120, payout: 0.40, correctAnswers: ['Asante sana'] },
        { id: 'trans3', title: 'Direction (EN‚ÜíSW)', instructions: 'Translate to Swahili: "Turn left"', wordLimit: 10, timeLimit: 120, payout: 0.40, correctAnswers: ['Geuka kushoto'] },
        { id: 'trans4', title: 'Menu Item (EN‚ÜíSW)', instructions: 'Translate to Swahili: "Grilled chicken"', wordLimit: 10, timeLimit: 120, payout: 0.40, correctAnswers: ['Kuku iliyochomwa'] },
        { id: 'trans5', title: 'Welcome (SW‚ÜíEN)', instructions: 'Translate to English: "Karibu sana nyumbani kwetu"', wordLimit: 10, timeLimit: 120, payout: 0.40, correctAnswers: ['Welcome to our home', 'Welcome to our house'] },
        { id: 'trans6', title: 'Question (EN‚ÜíSW)', instructions: 'Translate to Swahili: "Where is the hospital?"', wordLimit: 10, timeLimit: 120, payout: 0.40, correctAnswers: ['Wapi zahanati'] },
        { id: 'trans7', title: 'Price Query (EN‚ÜíSW)', instructions: 'Translate to Swahili: "How much does this cost?"', wordLimit: 10, timeLimit: 120, payout: 0.40, correctAnswers: ['Bei gani'] },
        { id: 'trans8', title: 'Appointment (SW‚ÜíEN)', instructions: 'Translate to English: "Nataka kupanga miadi"', wordLimit: 10, timeLimit: 120, payout: 0.40, correctAnswers: ['I want to schedule appointment'] },
        { id: 'trans9', title: 'Weather (EN‚ÜíSW)', instructions: 'Translate to Swahili: "The weather"', wordLimit: 10, timeLimit: 120, payout: 0.40, correctAnswers: ['Tabia ya hewa'] },
        { id: 'trans10', title: 'Sheng Challenge', instructions: 'What does "Maze" mean in Sheng?', wordLimit: 15, timeLimit: 120, payout: 0.50, correctAnswers: ['Cool', 'Wow', 'Amazing', 'Great'] }
      ],
      prompt: [
        { id: 'prompt1', title: 'Image Generator', instructions: 'Write a detailed prompt to generate an image of a cozy coffee shop on a rainy day.', wordLimit: 60, timeLimit: 120, payout: 0.40 },
        { id: 'prompt2', title: 'Story Starter', instructions: 'Write a prompt that would make an AI write a mystery story set in Victorian London.', wordLimit: 50, timeLimit: 120, payout: 0.35 },
        { id: 'prompt3', title: 'Code Assistant', instructions: 'Write a clear prompt asking an AI to create a Python function that sorts a list.', wordLimit: 50, timeLimit: 120, payout: 0.35 },
        { id: 'prompt4', title: 'Recipe Creator', instructions: 'Write a prompt that would make an AI generate a healthy smoothie recipe using bananas and spinach.', wordLimit: 40, timeLimit: 120, payout: 0.30 },
        { id: 'prompt5', title: 'Character Design', instructions: 'Write a prompt to generate an image of a futuristic robot companion.', wordLimit: 60, timeLimit: 120, payout: 0.40 },
        { id: 'prompt6', title: 'Email Writer', instructions: 'Write a prompt asking an AI to draft a professional follow-up email after a job interview.', wordLimit: 50, timeLimit: 120, payout: 0.35 },
        { id: 'prompt7', title: 'Song Lyrics', instructions: 'Write a prompt to generate upbeat song lyrics about summer adventures.', wordLimit: 50, timeLimit: 120, payout: 0.35 },
        { id: 'prompt8', title: 'Logo Design', instructions: 'Write a prompt for generating a minimalist logo for a tech startup.', wordLimit: 50, timeLimit: 120, payout: 0.40 },
        { id: 'prompt9', title: 'Presentation Outline', instructions: 'Write a prompt asking an AI to create a presentation outline about climate change.', wordLimit: 50, timeLimit: 120, payout: 0.35 },
        { id: 'prompt10', title: 'Poem Generator', instructions: 'Write a prompt to generate a haiku about autumn leaves.', wordLimit: 40, timeLimit: 120, payout: 0.30 }
      ],
      creative: [
        { id: 'creative1', title: 'Tagline Creation', instructions: 'Create a catchy tagline for a new energy drink brand called "Spark".', wordLimit: 15, timeLimit: 120, payout: 0.30 },
        { id: 'creative2', title: 'Mini Story', instructions: 'Write a complete story in exactly 50 words about finding treasure.', wordLimit: 50, timeLimit: 120, payout: 0.40 },
        { id: 'creative3', title: 'Product Naming', instructions: 'Create 5 creative names for a new smart water bottle that tracks hydration.', wordLimit: 30, timeLimit: 120, payout: 0.35 },
        { id: 'creative4', title: 'Emoji Story', instructions: 'Write a mini story using only emojis (at least 10 emojis) that tells a love story.', wordLimit: 20, timeLimit: 120, payout: 0.25 },
        { id: 'creative5', title: 'Headline Writing', instructions: 'Write 3 attention-grabbing headlines for an article about saving money.', wordLimit: 40, timeLimit: 120, payout: 0.30 },
        { id: 'creative6', title: 'Limerick', instructions: 'Write a funny limerick about a programmer and their coffee addiction.', wordLimit: 40, timeLimit: 120, payout: 0.35 },
        { id: 'creative7', title: 'Brand Voice', instructions: 'Write a tweet (max 280 characters) for a luxury watch brand launching a new product.', wordLimit: 50, timeLimit: 120, payout: 0.30 },
        { id: 'creative8', title: 'Dialogue Writing', instructions: 'Write a short dialogue (4-6 lines) between a customer and a chatbot about a refund.', wordLimit: 60, timeLimit: 120, payout: 0.35 },
        { id: 'creative9', title: 'Acrostic Poem', instructions: 'Write an acrostic poem using the word "FUTURE".', wordLimit: 40, timeLimit: 120, payout: 0.30 },
        { id: 'creative10', title: 'Micro Ad', instructions: 'Write a 15-second radio ad script for a local pizza restaurant.', wordLimit: 50, timeLimit: 120, payout: 0.35 }
      ]
    };

    const faqData = [
      { q: 'How do I earn money with AI Runner?', a: 'Complete AI-generated tasks, get scored by our AI, and earn rewards based on your performance. Higher scores mean higher payouts!' },
      { q: 'What types of tasks are available?', a: 'We offer 5 categories: AI Chat Missions, Rewrite & Improve, Translation (EN‚ÜîSW/Sheng), Prompt Challenges, and Micro Creativity tasks.' },
      { q: 'How much can I earn per task?', a: 'Earnings range from $0.05 to $1.00 per task depending on your score. Pro members get access to higher-paying tasks up to $1.50+.' },
      { q: 'When can I withdraw my earnings?', a: 'Free users can withdraw on the 27th of each month (minimum $20). Pro users can withdraw 3 times per month with a $5 minimum.' },
      { q: 'How does the AI scoring work?', a: 'Our AI evaluates your response based on relevance, clarity, grammar, and rule compliance. Scores range from 0-100. Copy-pasted responses are automatically rejected.' },
      { q: 'What is the Pro Runner membership?', a: 'Pro Runner ($3 one-time) unlocks higher-paying tasks, more withdrawal options, lower minimums, and unlimited daily tasks.' },
      { q: 'Will copy-paste be detected?', a: 'Yes! Our AI automatically detects copy-pasted content. If detected, your task will be declined with a score below 10%.' },
      { q: 'Is there a daily task limit?', a: 'Free users have 10 tasks per day. Pro users enjoy unlimited daily tasks.' }
    ];

    // ==================== INITIALIZATION ====================
    async function initApp() {
      loadState();
      renderCategories();
      renderFAQ();
      updateUI();
      updateAuthUI();
      startWithdrawalCountdown();
      
      if (window.elementSdk) {
        await window.elementSdk.init({
          defaultConfig,
          onConfigChange: applyConfig,
          mapToCapabilities: (cfg) => ({
            recolorables: [
              { get: () => cfg.primary_color || defaultConfig.primary_color, set: (v) => { cfg.primary_color = v; window.elementSdk.setConfig({ primary_color: v }); } },
              { get: () => cfg.secondary_color || defaultConfig.secondary_color, set: (v) => { cfg.secondary_color = v; window.elementSdk.setConfig({ secondary_color: v }); } },
              { get: () => cfg.background_color || defaultConfig.background_color, set: (v) => { cfg.background_color = v; window.elementSdk.setConfig({ background_color: v }); } },
              { get: () => cfg.text_color || defaultConfig.text_color, set: (v) => { cfg.text_color = v; window.elementSdk.setConfig({ text_color: v }); } },
              { get: () => cfg.accent_color || defaultConfig.accent_color, set: (v) => { cfg.accent_color = v; window.elementSdk.setConfig({ accent_color: v }); } }
            ],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (cfg) => new Map([
            ['site_title', cfg.site_title || defaultConfig.site_title],
            ['hero_headline', cfg.hero_headline || defaultConfig.hero_headline],
            ['hero_subtext', cfg.hero_subtext || defaultConfig.hero_subtext]
          ])
        });
        config = window.elementSdk.config || { ...defaultConfig };
      }
      
      if (window.dataSdk) {
        await window.dataSdk.init({
          onDataChanged: (data) => {
            completedTasks = data;
            updateEarningsDisplay();
          }
        });
      }
      
      applyConfig(config);
    }

    async function applyConfig(cfg) {
      const title = cfg.site_title || defaultConfig.site_title;
      const headline = cfg.hero_headline || defaultConfig.hero_headline;
      const subtext = cfg.hero_subtext || defaultConfig.hero_subtext;
      
      const siteTitleEl = document.getElementById('siteTitle');
      const heroHeadlineEl = document.getElementById('heroHeadline');
      const heroSubtextEl = document.getElementById('heroSubtext');
      
      if (siteTitleEl) siteTitleEl.textContent = title;
      if (heroHeadlineEl) {
        const parts = headline.split('.');
        if (parts.length > 1) {
          heroHeadlineEl.innerHTML = `<span class="neon-text">${parts[0]}.</span><br><span class="neon-blue">${parts.slice(1).join('.').trim()}</span>`;
        } else {
          heroHeadlineEl.innerHTML = `<span class="neon-text">${headline}</span>`;
        }
      }
      if (heroSubtextEl) heroSubtextEl.textContent = subtext;
    }

    // ==================== STATE PERSISTENCE ====================
    function saveState() {
      localStorage.setItem('airunner_state', JSON.stringify(appState));
    }

    function loadState() {
      const saved = localStorage.getItem('airunner_state');
      if (saved) {
        appState = { ...appState, ...JSON.parse(saved) };
      }
    }

    // ==================== WITHDRAWAL COUNTDOWN ====================
    function startWithdrawalCountdown() {
      if (appState.withdrawalCountdownInterval) {
        clearInterval(appState.withdrawalCountdownInterval);
      }

      function updateCountdownDisplay() {
        const today = new Date();
        const nextWithdrawal = new Date(today.getFullYear(), today.getMonth(), 27);
        
        if (today.getDate() > 27) {
          nextWithdrawal.setMonth(nextWithdrawal.getMonth() + 1);
        }
        
        const now = new Date();
        const diff = nextWithdrawal - now;
        
        if (diff <= 0) {
          document.getElementById('withdrawalCountdown').textContent = 'NOW!';
          return;
        }
        
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        
        document.getElementById('withdrawalCountdown').textContent = 
          `${days}d ${hours}h ${mins}m`;
      }
      
      updateCountdownDisplay();
      appState.withdrawalCountdownInterval = setInterval(updateCountdownDisplay, 60000);
    }

    // ==================== NAVIGATION ====================
    function navigateTo(page) {
      const protectedPages = ['dashboard', 'tasks', 'earnings', 'profile', 'subscription'];
      
      if (protectedPages.includes(page) && !appState.isLoggedIn) {
        showToast('Please login to access this page', 'info');
        page = 'auth';
      }
      
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      const targetPage = document.getElementById(`${page}-page`);
      if (targetPage) {
        targetPage.classList.add('active');
        window.scrollTo(0, 0);
        
        if (page === 'tasks') {
          showCategories();
        }
        if (page === 'earnings') {
          updateEarningsPage();
        }
        if (page === 'subscription') {
          updateSubscriptionPage();
        }
        if (page === 'profile') {
          updateProfilePage();
        }
        if (page === 'dashboard') {
          updateDashboard();
        }
      }
    }

    // ==================== MOBILE NAVIGATION ====================
    const hamburgerBtn = document.getElementById('hamburgerBtn');
    const mobileNav = document.getElementById('mobileNav');
    const mobileNavOverlay = document.getElementById('mobileNavOverlay');

    hamburgerBtn.addEventListener('click', () => {
      hamburgerBtn.classList.toggle('active');
      mobileNav.classList.toggle('active');
      mobileNavOverlay.classList.toggle('active');
    });

    mobileNavOverlay.addEventListener('click', closeMobileNav);

    function closeMobileNav() {
      hamburgerBtn.classList.remove('active');
      mobileNav.classList.remove('active');
      mobileNavOverlay.classList.remove('active');
    }

    // ==================== AUTHENTICATION ====================
    let authMode = 'login';

    function switchAuthTab(mode) {
      authMode = mode;
      const loginTab = document.getElementById('loginTab');
      const registerTab = document.getElementById('registerTab');
      const emailField = document.getElementById('emailField');
      const authTitle = document.getElementById('authTitle');
      const authSubtitle = document.getElementById('authSubtitle');
      const authSubmitBtn = document.getElementById('authSubmitBtn');
      
      if (mode === 'login') {
        loginTab.classList.add('active');
        loginTab.style.background = 'rgba(0, 255, 136, 0.2)';
        loginTab.style.color = '#00ff88';
        registerTab.classList.remove('active');
        registerTab.style.background = 'transparent';
        registerTab.style.color = 'rgba(255,255,255,0.6)';
        emailField.style.display = 'none';
        authTitle.textContent = 'Welcome Back';
        authSubtitle.textContent = 'Sign in to continue earning';
        authSubmitBtn.textContent = 'Sign In';
      } else {
        registerTab.classList.add('active');
        registerTab.style.background = 'rgba(0, 255, 136, 0.2)';
        registerTab.style.color = '#00ff88';
        loginTab.classList.remove('active');
        loginTab.style.background = 'transparent';
        loginTab.style.color = 'rgba(255,255,255,0.6)';
        emailField.style.display = 'block';
        authTitle.textContent = 'Create Account';
        authSubtitle.textContent = 'Start your earning journey';
        authSubmitBtn.textContent = 'Create Account';
      }
    }

    function handleAuth(e) {
      e.preventDefault();
      const username = document.getElementById('authUsername').value;
      const password = document.getElementById('authPassword').value;
      
      if (!username || !password) {
        showToast('Please fill in all fields', 'error');
        return;
      }
      
      appState.isLoggedIn = true;
      appState.username = username;
      saveState();
      updateUI();
      updateAuthUI();
      showToast(`Welcome, ${username}!`, 'success');
      navigateTo('dashboard');
    }

    function handleGuestMode() {
      appState.isLoggedIn = true;
      appState.username = 'Guest';
      saveState();
      updateUI();
      updateAuthUI();
      showToast('Welcome, Guest!', 'success');
      navigateTo('dashboard');
    }

    function handleLogout() {
      appState.isLoggedIn = false;
      appState.username = 'Guest';
      saveState();
      updateUI();
      updateAuthUI();
      showToast('Logged out successfully', 'info');
      navigateTo('landing');
    }

    function handleResetSession() {
      showConfirm('Reset All Data?', 'This will clear all your progress, earnings, and settings. This cannot be undone.', () => {
        localStorage.removeItem('airunner_state');
        appState = {
          isLoggedIn: false,
          isPro: false,
          username: 'Guest',
          balance: 0,
          totalEarned: 0,
          totalWithdrawn: 0,
          tasksCompleted: 0,
          dailyTasksRemaining: 10,
          withdrawalsThisMonth: 0,
          lastWithdrawalDate: null,
          completedTaskIds: [],
          currentTask: null,
          timerInterval: null,
          withdrawalCountdownInterval: null,
          timeRemaining: 120
        };
        updateUI();
        updateAuthUI();
        showToast('All data has been reset', 'info');
        navigateTo('landing');
      });
    }

    function updateAuthUI() {
      const authNavLink = document.getElementById('authNavLink');
      const mobileAuthLink = document.getElementById('mobileAuthLink');
      const headerCTA = document.getElementById('headerCTA');
      
      if (appState.isLoggedIn) {
        if (authNavLink) {
          authNavLink.textContent = 'Dashboard';
          authNavLink.onclick = () => navigateTo('dashboard');
        }
        if (mobileAuthLink) {
          mobileAuthLink.innerHTML = 'üìä Dashboard';
          mobileAuthLink.onclick = () => { navigateTo('dashboard'); closeMobileNav(); };
        }
        if (headerCTA) {
          headerCTA.textContent = 'Dashboard';
          headerCTA.onclick = () => navigateTo('dashboard');
        }
      } else {
        if (authNavLink) {
          authNavLink.textContent = 'Login';
          authNavLink.onclick = () => navigateTo('auth');
        }
        if (mobileAuthLink) {
          mobileAuthLink.innerHTML = 'üîê Login';
          mobileAuthLink.onclick = () => { navigateTo('auth'); closeMobileNav(); };
        }
        if (headerCTA) {
          headerCTA.textContent = 'Start Running';
          headerCTA.onclick = handleStartRunning;
        }
      }
    }

    // ==================== TASK SYSTEM ====================
    function renderCategories() {
      const grid = document.getElementById('categoryGrid');
      if (!grid) return;
      
      grid.innerHTML = taskCategories.map(cat => `
        <button class="glass-card p-6 text-center" onclick="selectCategory('${cat.id}')">
          <div class="category-icon mx-auto mb-4 bg-gradient-to-br ${cat.color}">${cat.icon}</div>
          <h3 class="font-semibold mb-2">${cat.name}</h3>
          <p class="text-sm text-gray-400">${taskDatabase[cat.id].length} tasks</p>
        </button>
      `).join('');
    }

    let currentCategory = null;

    function selectCategory(categoryId) {
      currentCategory = categoryId;
      const category = taskCategories.find(c => c.id === categoryId);
      document.getElementById('selectedCategoryTitle').textContent = category.name;
      
      renderTaskList(categoryId);
      
      document.getElementById('taskCategoryView').style.display = 'none';
      document.getElementById('taskListView').style.display = 'block';
    }

    function renderTaskList(categoryId) {
      const taskList = document.getElementById('taskList');
      const tasks = taskDatabase[categoryId];
      
      taskList.innerHTML = tasks.map(task => {
        const isCompleted = appState.completedTaskIds.includes(task.id);
        return `
          <div class="glass-card p-4 ${isCompleted ? 'opacity-50' : ''}">
            <div class="flex items-center justify-between">
              <div>
                <h4 class="font-semibold mb-1">${task.title}</h4>
                <p class="text-sm text-gray-400">${task.wordLimit} words ‚Ä¢ ${task.timeLimit}s</p>
              </div>
              <div class="text-right">
                <p class="text-lg font-bold neon-text">$${task.payout.toFixed(2)}</p>
                ${isCompleted 
                  ? '<span class="text-xs text-gray-400">Completed</span>'
                  : `<button class="neon-btn text-sm px-4 py-2 mt-2" onclick="startTask('${categoryId}', '${task.id}')">Start</button>`
                }
              </div>
            </div>
          </div>
        `;
      }).join('');
    }

    function showCategories() {
      document.getElementById('taskCategoryView').style.display = 'block';
      document.getElementById('taskListView').style.display = 'none';
      document.getElementById('activeTaskView').style.display = 'none';
      document.getElementById('taskResultView').style.display = 'none';
      clearTimer();
    }

    function showTaskList() {
      document.getElementById('taskListView').style.display = 'block';
      document.getElementById('activeTaskView').style.display = 'none';
      document.getElementById('taskResultView').style.display = 'none';
      clearTimer();
    }

    function startTask(categoryId, taskId) {
      if (!appState.isPro && appState.dailyTasksRemaining <= 0) {
        showToast('Daily task limit reached! Upgrade to Pro for unlimited tasks.', 'error');
        return;
      }
      
      const task = taskDatabase[categoryId].find(t => t.id === taskId);
      const category = taskCategories.find(c => c.id === categoryId);
      
      appState.currentTask = { ...task, category: categoryId };
      appState.timeRemaining = task.timeLimit;
      
      document.getElementById('taskCategoryBadge').textContent = category.name;
      document.getElementById('taskTitle').textContent = task.title;
      document.getElementById('taskInstructions').textContent = task.instructions;
      document.getElementById('taskWordLimit').textContent = task.wordLimit;
      document.getElementById('maxWords').textContent = task.wordLimit;
      document.getElementById('taskPayout').textContent = `$${task.payout.toFixed(2)}`;
      document.getElementById('taskResponse').value = '';
      document.getElementById('wordCount').textContent = '0';
      document.getElementById('copyPasteWarning').style.display = 'none';
      
      document.getElementById('taskListView').style.display = 'none';
      document.getElementById('activeTaskView').style.display = 'block';
      
      startTimer();
    }

    function startTimer() {
      clearTimer();
      updateTimerDisplay();
      
      appState.timerInterval = setInterval(() => {
        appState.timeRemaining--;
        updateTimerDisplay();
        
        if (appState.timeRemaining <= 0) {
          clearTimer();
          submitTask();
        }
      }, 1000);
    }

    function clearTimer() {
      if (appState.timerInterval) {
        clearInterval(appState.timerInterval);
        appState.timerInterval = null;
      }
    }

    function updateTimerDisplay() {
      const mins = Math.floor(appState.timeRemaining / 60);
      const secs = appState.timeRemaining % 60;
      document.getElementById('taskTimer').textContent = 
        `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      
      if (appState.timeRemaining <= 30) {
        document.getElementById('taskTimer').style.color = '#ff6b6b';
      } else {
        document.getElementById('taskTimer').style.color = '#00d4ff';
      }
    }

    let lastInput = '';
    function updateWordCount() {
      const response = document.getElementById('taskResponse').value;
      const words = response.trim().split(/\s+/).filter(w => w.length > 0).length;
      document.getElementById('wordCount').textContent = words;
      
      if (response.length - lastInput.length > 20) {
        document.getElementById('copyPasteWarning').style.display = 'inline';
      }
      lastInput = response;
    }

    function validateTranslationResponse(response, correctAnswers) {
      const cleanResponse = response.toLowerCase().trim();
      return correctAnswers.some(answer => cleanResponse.includes(answer.toLowerCase()));
    }

    async function submitTask() {
      clearTimer();
      
      const response = document.getElementById('taskResponse').value.trim();
      const task = appState.currentTask;
      
      if (!response) {
        showToast('Please enter a response', 'error');
        startTimer();
        return;
      }
      
      const submitBtn = document.getElementById('submitTaskBtn');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Scoring...';
      
      const wordCount = response.split(/\s+/).filter(w => w.length > 0).length;
      const hasCopyPaste = document.getElementById('copyPasteWarning').style.display !== 'none';
      
      // Check for exact copy-paste
      const recentResponses = completedTasks.slice(-5).map(t => t.user_response);
      const isExactDuplicate = recentResponses.some(r => r && r.toLowerCase() === response.toLowerCase());
      
      let score = 0;
      let isValid = true;
      let rejectionReason = '';
      
      // TRANSLATION VALIDATION
      if (task.category === 'translation') {
        if (task.correctAnswers && !validateTranslationResponse(response, task.correctAnswers)) {
          isValid = false;
          rejectionReason = 'Incorrect translation provided';
          score = 0;
        } else {
          score = 95;
        }
      } else if (isExactDuplicate || hasCopyPaste) {
        // COPY-PASTE DETECTION: Score below 10%
        score = Math.floor(Math.random() * 10);
        isValid = false;
        rejectionReason = 'Copy-paste detected - response rejected';
      } else {
        // NORMAL SCORING
        score = Math.floor(Math.random() * 30) + 50;
        
        if (wordCount >= task.wordLimit * 0.8) score += 10;
        if (wordCount >= task.wordLimit * 0.5) score += 5;
        if (response.length < 20) score -= 30;
        
        score = Math.max(0, Math.min(100, score));
      }
      
      let reward = 0;
      if (isValid && score >= 90) {
        reward = task.payout;
      } else if (isValid && score >= 75) {
        reward = task.payout * 0.6;
      } else if (isValid && score >= 50) {
        reward = task.payout * 0.2;
      } else {
        reward = 0;
      }
      
      if (appState.isPro && isValid) {
        reward *= 1.5;
      }
      
      let feedback = '';
      if (!isValid) {
        feedback = rejectionReason;
      } else if (score >= 90) {
        feedback = 'Excellent work! Your response was clear, relevant, and well-written.';
      } else if (score >= 75) {
        feedback = 'Good job! Your response was solid with minor areas for improvement.';
      } else if (score >= 50) {
        feedback = 'Acceptable work. Try to be more detailed and relevant in your responses.';
      } else {
        feedback = 'Needs improvement. Please ensure your response is original and follows the instructions.';
      }
      
      if (window.dataSdk) {
        const result = await window.dataSdk.create({
          type: 'completed_task',
          category: task.category,
          title: task.title,
          instructions: task.instructions,
          word_limit: task.wordLimit,
          time_limit: task.timeLimit,
          payout: task.payout,
          user_response: response,
          score: score,
          reward: reward,
          completed_at: new Date().toISOString(),
          status: isValid ? 'completed' : 'rejected',
          is_valid: isValid,
          rejection_reason: rejectionReason
        });
        
        if (!result.isOk) {
          showToast('Error saving task result', 'error');
        }
      }
      
      if (isValid) {
        appState.balance += reward;
        appState.totalEarned += reward;
        appState.tasksCompleted++;
        appState.completedTaskIds.push(task.id);
        if (!appState.isPro) {
          appState.dailyTasksRemaining--;
        }
      }
      
      saveState();
      updateUI();
      
      // Show result
      document.getElementById('resultStatusContainer').style.display = isValid ? 'block' : 'none';
      document.getElementById('resultRewardContainer').style.display = isValid ? 'block' : 'none';
      
      if (!isValid) {
        document.getElementById('resultStatusContainer').innerHTML = `
          <div class="text-center text-red-400">
            <p class="text-2xl font-bold mb-2">‚ùå REJECTED</p>
            <p class="text-lg">${rejectionReason}</p>
          </div>
        `;
      } else {
        document.getElementById('resultScore').textContent = score;
        document.getElementById('resultReward').textContent = `$${reward.toFixed(2)}`;
      }
      
      document.getElementById('resultFeedback').textContent = feedback;
      
      document.getElementById('activeTaskView').style.display = 'none';
      document.getElementById('taskResultView').style.display = 'block';
      
      submitBtn.disabled = false;
      submitBtn.textContent = 'Submit Response';
    }

    // ==================== EARNINGS ====================
    function updateEarningsDisplay() {
      const totalEarned = completedTasks.reduce((sum, t) => sum + (t.reward || 0), 0);
      appState.totalEarned = totalEarned;
      appState.balance = totalEarned - appState.totalWithdrawn;
      updateUI();
    }

    function updateEarningsPage() {
      document.getElementById('totalEarned').textContent = `$${appState.totalEarned.toFixed(2)}`;
      document.getElementById('availableBalance').textContent = `$${appState.balance.toFixed(2)}`;
      document.getElementById('totalWithdrawn').textContent = `$${appState.totalWithdrawn.toFixed(2)}`;
      
      const rulesContent = document.getElementById('withdrawalRulesContent');
      if (appState.isPro) {
        rulesContent.innerHTML = `
          <div class="grid sm:grid-cols-3 gap-4 mb-4">
            <div class="glass-card p-4 withdrawal-available">
              <p class="text-sm text-gray-400">Minimum</p>
              <p class="font-bold neon-text">$5.00</p>
            </div>
            <div class="glass-card p-4 withdrawal-available">
              <p class="text-sm text-gray-400">Frequency</p>
              <p class="font-bold neon-text">3√ó / month</p>
            </div>
            <div class="glass-card p-4 withdrawal-available">
              <p class="text-sm text-gray-400">Remaining</p>
              <p class="font-bold neon-text">${3 - appState.withdrawalsThisMonth}</p>
            </div>
          </div>
          <div class="countdown-timer w-full text-center">
            <p class="text-sm text-gray-400 mb-1">Next Withdrawal Window</p>
            <p id="earningsCountdown">Calculating...</p>
          </div>
        `;
        updateCountdownForEarnings();
      } else {
        const today = new Date();
        const nextWithdrawal = new Date(today.getFullYear(), today.getMonth(), 27);
        if (today.getDate() > 27) {
          nextWithdrawal.setMonth(nextWithdrawal.getMonth() + 1);
        }
        const daysUntil = Math.ceil((nextWithdrawal - today) / (1000 * 60 * 60 * 24));
        
        rulesContent.innerHTML = `
          <div class="grid sm:grid-cols-3 gap-4 mb-4">
            <div class="glass-card p-4 withdrawal-locked">
              <p class="text-sm text-gray-400">Minimum</p>
              <p class="font-bold text-red-400">$20.00</p>
            </div>
            <div class="glass-card p-4 withdrawal-locked">
              <p class="text-sm text-gray-400">Next Date</p>
              <p class="font-bold text-red-400">27th (${daysUntil} days)</p>
            </div>
            <div class="glass-card p-4 withdrawal-locked">
              <p class="text-sm text-gray-400">Frequency</p>
              <p class="font-bold text-red-400">1√ó / month</p>
            </div>
          </div>
          <div class="countdown-timer w-full text-center">
            <p class="text-sm text-gray-400 mb-1">Time until Next Withdrawal (27th)</p>
            <p id="earningsCountdown">${daysUntil}d</p>
          </div>
          <p class="text-sm text-yellow-400 mt-4">‚¨ÜÔ∏è Upgrade to Pro for better withdrawal options!</p>
        `;
        updateCountdownForEarnings();
      }
      
      const recentList = document.getElementById('recentEarningsList');
      if (completedTasks.length > 0) {
        const recent = completedTasks.slice(-10).reverse();
        recentList.innerHTML = recent.map(task => {
          const statusClass = task.is_valid ? 'neon-text' : 'text-red-400';
          const statusLabel = task.is_valid ? `+$${(task.reward || 0).toFixed(2)}` : 'REJECTED';
          return `
            <div class="flex items-center justify-between p-3 glass-card">
              <div>
                <p class="font-semibold">${task.title}</p>
                <p class="text-sm text-gray-400">Score: ${task.score}/100</p>
              </div>
              <p class="font-bold ${statusClass}">${statusLabel}</p>
            </div>
          `;
        }).join('');
      }
    }

    function updateCountdownForEarnings() {
      const today = new Date();
      const nextWithdrawal = new Date(today.getFullYear(), today.getMonth(), 27);
      if (today.getDate() > 27) {
        nextWithdrawal.setMonth(nextWithdrawal.getMonth() + 1);
      }
      const diff = nextWithdrawal - today;
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      
      const countdownEl = document.getElementById('earningsCountdown');
      if (countdownEl) {
        countdownEl.textContent = `${days}d ${hours}h ${mins}m`;
      }
    }

    // ==================== WITHDRAWALS ====================
    function handleWithdraw() {
      const today = new Date();
      const isWithdrawalDay = today.getDate() === 27;
      
      if (appState.isPro) {
        if (appState.withdrawalsThisMonth >= 3) {
          showToast('Monthly withdrawal limit reached', 'error');
          return;
        }
        if (appState.balance < 5) {
          showToast('Minimum withdrawal is $5', 'error');
          return;
        }
        processWithdrawal();
      } else {
        if (!isWithdrawalDay) {
          const nextWithdrawal = new Date(today.getFullYear(), today.getMonth(), 27);
          if (today.getDate() > 27) {
            nextWithdrawal.setMonth(nextWithdrawal.getMonth() + 1);
          }
          const daysUntil = Math.ceil((nextWithdrawal - today) / (1000 * 60 * 60 * 24));
          showToast(`Withdrawals available on the 27th (${daysUntil} days remaining)`, 'error');
          return;
        }
        if (appState.balance < 20) {
          showToast('Minimum withdrawal is $20', 'error');
          return;
        }
        processWithdrawal();
      }
    }

    function processWithdrawal() {
      showConfirm('Confirm Withdrawal', `Withdraw $${appState.balance.toFixed(2)} to your account?`, () => {
        const amount = appState.balance;
        appState.totalWithdrawn += amount;
        appState.balance = 0;
        appState.withdrawalsThisMonth++;
        appState.lastWithdrawalDate = new Date().toISOString();
        saveState();
        updateUI();
        showToast(`Successfully withdrawn $${amount.toFixed(2)}!`, 'success');
      });
    }

    // ==================== SUBSCRIPTION ====================
    function updateSubscriptionPage() {
      const actionDiv = document.getElementById('subscriptionAction');
      const proMessage = document.getElementById('alreadyProMessage');
      const paymentMessage = document.getElementById('paymentReceivedMessage');
      
      if (appState.isPro) {
        actionDiv.style.display = 'none';
        proMessage.style.display = 'block';
        paymentMessage.style.display = 'none';
      } else {
        actionDiv.style.display = 'block';
        proMessage.style.display = 'none';
        paymentMessage.style.display = 'none';
      }
    }

    function handleSubscribe() {
      window.open('https://payment.intasend.com/pay/159b9e33-b56f-49d4-b57e-de6a7cb38560/', '_blank');
    }

    // ==================== PROFILE ====================
    function updateProfilePage() {
      document.getElementById('profileUsername').textContent = appState.username;
      document.getElementById('profileMembership').textContent = appState.isPro ? 'Pro Runner' : 'Free Runner';
      document.getElementById('profileTotalEarnings').textContent = `$${appState.totalEarned.toFixed(2)}`;
      document.getElementById('profileTasksCompleted').textContent = appState.tasksCompleted;
    }

    function changeLanguage() {
      const lang = document.getElementById('languageSelect').value;
      showToast(`Language changed to ${lang === 'en' ? 'English' : 'Swahili'}`, 'info');
    }

    // ==================== FAQ ====================
    function renderFAQ() {
      const container = document.getElementById('faqContainer');
      if (!container) return;
      
      container.innerHTML = faqData.map((item, i) => `
        <div class="glass-card overflow-hidden">
          <button class="w-full p-6 text-left flex items-center justify-between" onclick="toggleFAQ(${i})">
            <span class="font-semibold pr-4">${item.q}</span>
            <span class="text-2xl neon-text faq-icon-${i}">+</span>
          </button>
          <div class="faq-answer-${i} px-6 pb-6 hidden">
            <p class="text-gray-400">${item.a}</p>
          </div>
        </div>
      `).join('');
    }

    function toggleFAQ(index) {
      const answer = document.querySelector(`.faq-answer-${index}`);
      const icon = document.querySelector(`.faq-icon-${index}`);
      
      if (answer.classList.contains('hidden')) {
        answer.classList.remove('hidden');
        icon.textContent = '‚àí';
      } else {
        answer.classList.add('hidden');
        icon.textContent = '+';
      }
    }

    // ==================== CONTACT FORM ====================
    async function handleContactSubmit(e) {
      e.preventDefault();
      
      const name = document.getElementById('contactName').value;
      const email = document.getElementById('contactEmail').value;
      const subject = document.getElementById('contactSubject').value;
      const message = document.getElementById('contactMessage').value;
      
      const submitBtn = document.getElementById('contactSubmitBtn');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Sending...';
      
      try {
        const response = await fetch('https://api.web3forms.com/submit', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            access_key: 'a0a5e898-8dde-43eb-8d36-e0c1757a3219',
            name: name,
            email: email,
            subject: subject,
            message: message,
            from_name: 'AI Runner Contact',
            to_email: 'hankwane1@gmail.com',
            form_type: 'contact'
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          showToast('Message sent successfully! We\'ll get back to you soon.', 'success');
          e.target.reset();
          
          if (window.dataSdk) {
            await window.dataSdk.create({
              form_type: 'contact',
              name: name,
              email: email,
              subject: subject,
              message: message,
              submitted_at: new Date().toISOString()
            });
          }
        } else {
          showToast('Error sending message. Please try again.', 'error');
        }
      } catch (err) {
        showToast('Error sending message. Please check your connection.', 'error');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Send Message';
      }
    }

    // ==================== UI HELPERS ====================
    function updateUI() {
      document.getElementById('balanceDisplay').textContent = `$${appState.balance.toFixed(2)}`;
      document.getElementById('tasksCompletedDisplay').textContent = appState.tasksCompleted;
      document.getElementById('membershipDisplay').textContent = appState.isPro ? 'Pro' : 'Free';
      document.getElementById('membershipBadge').textContent = appState.isPro ? 'Pro Runner' : 'Free';
      document.getElementById('membershipBadge').className = appState.isPro ? 'font-semibold neon-text' : 'font-semibold';
      document.getElementById('dashboardUsername').textContent = appState.username;
      document.getElementById('dailyTasksRemaining').textContent = appState.isPro ? '‚àû' : appState.dailyTasksRemaining;
      
      const today = new Date();
      const isWithdrawalDay = today.getDate() === 27;
      const statusText = document.getElementById('withdrawalStatusText');
      const withdrawBtn = document.getElementById('withdrawBtn');
      
      if (appState.isPro) {
        const remaining = 3 - appState.withdrawalsThisMonth;
        statusText.textContent = `Pro: ${remaining} withdrawals remaining this month (min $5)`;
        withdrawBtn.disabled = remaining <= 0 || appState.balance < 5;
      } else {
        if (isWithdrawalDay) {
          statusText.textContent = 'Today is withdrawal day! (min $20)';
          withdrawBtn.disabled = appState.balance < 20;
        } else {
          const nextWithdrawal = new Date(today.getFullYear(), today.getMonth(), 27);
          if (today.getDate() > 27) {
            nextWithdrawal.setMonth(nextWithdrawal.getMonth() + 1);
          }
          const daysUntil = Math.ceil((nextWithdrawal - today) / (1000 * 60 * 60 * 24));
          statusText.textContent = `Free users: Next withdrawal in ${daysUntil} days (27th)`;
          withdrawBtn.disabled = true;
        }
      }
    }

    function updateDashboard() {
      updateUI();
    }

    function showToast(message, type = 'info') {
      const container = document.getElementById('toastContainer');
      const toast = document.createElement('div');
      toast.className = `toast toast-${type} font-semibold`;
      toast.textContent = message;
      container.appendChild(toast);
      
      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateX(100px)';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    function showConfirm(title, message, onConfirm) {
      const container = document.getElementById('confirmContainer');
      container.innerHTML = `
        <div class="confirm-overlay" onclick="closeConfirm()"></div>
        <div class="confirm-dialog glass-panel">
          <h3 class="font-orbitron text-xl font-bold mb-4 neon-text">${title}</h3>
          <p class="text-gray-300 mb-6">${message}</p>
          <div class="flex gap-4">
            <button class="flex-1 neon-btn-outline" onclick="closeConfirm()">Cancel</button>
            <button class="flex-1 neon-btn" id="confirmYesBtn">Confirm</button>
          </div>
        </div>
      `;
      
      document.getElementById('confirmYesBtn').onclick = () => {
        closeConfirm();
        onConfirm();
      };
    }

    function closeConfirm() {
      document.getElementById('confirmContainer').innerHTML = '';
    }

    // ==================== ACTION HANDLERS ====================
    function handleStartRunning() {
      if (appState.isLoggedIn) {
        navigateTo('dashboard');
      } else {
        navigateTo('auth');
      }
    }

    function handleStartTasks() {
      if (appState.isLoggedIn) {
        navigateTo('tasks');
      } else {
        navigateTo('auth');
      }
    }

    function handleContinueFree() {
      if (appState.isLoggedIn) {
        navigateTo('dashboard');
      } else {
        navigateTo('auth');
      }
    }

    // ==================== INITIALIZATION ====================
    switchAuthTab('login');
    initApp();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ce6e81881329c02',t:'MTc3MTE4MDU0My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>